# 银行系统智能合约

这是一个基于以太坊的银行系统智能合约集合，包含基础银行功能、大额银行功能和管理合约。

## 合约架构

项目包含以下主要合约：

1. `IBank.sol`：银行系统接口合约
   - 定义了银行系统的基本功能接口
   - 包括存款、提款、余额查询等功能

2. `Bank.sol`：基础银行合约
   - 实现 `IBank` 接口
   - 支持 ETH 和 ERC20 代币的存取
   - 维护用户存款排行榜（前三名）
   - 基本的管理员权限控制

3. `BigBank.sol`：大额银行合约
   - 继承自 `Bank` 合约
   - 增加最小存款限制（0.001 ETH）
   - 支持管理员权限转移

4. `Admin.sol`：管理合约
   - 独立的管理员权限控制
   - 可以从任何 `IBank` 实现合约中提取资金
   - 包含 ETH 接收功能

## 主要功能

### 存款功能
- ETH 存款（`deposit()`）
- ERC20 代币存款（`depositToken()`）
- BigBank 要求最小存款额为 0.001 ETH

### 提款功能
- ETH 提款（`withdraw()`）
- ERC20 代币提款（`withdrawToken()`）
- 仅管理员可以提款

### 查询功能
- 查询合约 ETH 余额
- 查询用户 ETH 余额
- 查询用户代币余额
- 查询前三名存款人

### 管理功能
- BigBank 支持管理员转移
- Admin 合约可以从任何 IBank 合约提取资金

## 使用流程

1. 部署合约
   ```solidity
   1. 部署 BigBank 合约
   2. 部署 Admin 合约
   ```

2. 设置管理权限
   ```solidity
   1. 调用 BigBank.transferOwnership() 将所有权转移给 Admin 合约
   ```

3. 用户操作
   ```solidity
   1. 用户向 BigBank 存入不少于 0.001 ETH 的资金
   2. 用户可以查询自己的余额和排名
   ```

4. 管理员操作
   ```solidity
   1. Admin 合约的 owner 可以调用 adminWithdraw() 提取 BigBank 中的资金
   ```

## 注意事项

1. 安全性
   - 所有关键操作都有权限控制
   - 包含必要的金额检查
   - 使用 require 确保操作安全

2. 限制条件
   - BigBank 最小存款额为 0.001 ETH
   - 只有合约 owner 可以提款
   - Admin 合约的 owner 才能调用管理功能

3. 最佳实践
   - 建议在进行任何操作前检查余额
   - 重要操作建议先在测试网络验证
   - 确保 Admin 合约地址正确再转移权限

## 开发环境

- Solidity 版本: ^0.8.13
- 开发框架: [您使用的框架]
- 测试网络: [测试网络信息]
